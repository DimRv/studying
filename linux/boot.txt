Стандартный запуск системы:
1. BIOS (Basic Input Output System) запускает POST (Power On Self Test) для проверки здоровья железа.
2. После POST выдает прерывание int 19h при успешном POST
3. Обработчик прерывания ищет загрузочные устройства, если несколько, то порядок в BIOS,
4. Происходит чтение первого сектора (512 б), называемого MBR в нем запускается первичный загрузчик
446 байт - первичный загрузчик; 64 байт - таблица разделов; 2байт - магическое число 0х55АА
5. Первичный загрузчик ищет в таблице разделов вторичный загрузчик (GRUB)
6. Вторичный загрузчик грузит ядро kernel и образ initrd (Init Ram Disk) при необходимости
7. Ядро запускает программу init (взаимодействие с драйверами)

GRUB (Grand Unifired BootLoader) - загрузчик
/sbin/grub-install - установка загрузчика
/boot/grub/grub.conf - конфигурация

Ядро (kernel) - ПО которое обеспечивает: взаимодействие с устройствами, управление памятью, процессами, сетевое взаимодействие.

init - основной процесс (PID=1) выполняет все что указано в /etc/inittab, в записи initdefault содержится запись
об уровне выполнения, который запускается по умолчанию. (может быть в GRUB)
/etc/initscript - для создания новых процессов


/etc/init.d/ - стартовые скрипты
/etc/rc.? - сюда размещаются символические ссылки на стартовые скрипты разных уровней выполнения

Уровень выполнения (runlevel) - режим в котором запускается операционная система, каждый уровень содержит свой набор
процессов, которые должны выполняться.
0 - завершение работы
1 или S - однопользовательский (обслуживание, выполнение административных задач)
2 - многопользовательский без сети (без демонов)
3 - многопользовательский с поддержкой сети, но без GUI. Серверная версия.
4 - Уровень под себя
5 - тотже 3 только с GUI. Обычно это десктопные версии
6 - перезагрузка системы

runlevel - вывод текущего уровня выполнения (первое число это предыдущий уровень выполнения)
telinit - смена уровня выполнения. ALT+F1
init - смена уровня выполнения. ALT+F1
systemctl get-default - вывод текущего уровня выполнения systemd
ls -l /lib/systemd/system/runlevel* - посмотреть 7уровней выполнения systemd
ln -sf /lib/systemd/system/runlevel3.target /etc/systemd/system/default.target - смена уровня выполнения на 3
systemctl list-dependencies graphical.target - просмотр зависимостей при запуске определенного runlevel
systemctl show -p WantedBy sshd.service - посмотреть какой runlevel использует sshd
systemctl enable sshd.service - смена уровня запуска
Создание собственного runlevel:
cp /usr/lib/systemd/system/graphical.target /usr/lib/systemd/system/mynew.target - основа runlevel
mkdir /etc/systemd/system/mynew.target.wants - в этой директории размещаем символьные ссылки на дополнительные службы

/etc/init.d/ - директория для хранения стартовых скриптов
/etc/rc.? - сюда размещаются символические ссылки на стартовые скрипты разных уровней выполнения, S-start, K-kill
rc.sysinit - один из первых скриптов запускаемых при старте

chkconfig - программа для управления автозагрузкой (--add, --del, --list)
update-rc.d - запуск и остановка скриптов

Демон - процесс, запущенный в фоновом режиме или процесс без управляющего терминала. Есть два вида.
Два вида демонов:
Standalone - запускаемые init, стартовым скриптом, пользователем.
Transient - процессы, запускаемые внешней программой xinetd
Основная задача xinetd - открытие сетевых портов служб, что находятся под его управлением


